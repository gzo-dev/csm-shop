"use strict";

var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.watermakRouter = void 0;
var _express = _interopRequireDefault(require("express"));
var _water = _interopRequireDefault(require("./water.controller"));
var _convertWebPtoJpg = _interopRequireDefault(require("../../../middleware/convertWebPtoJpg"));
var multer = require('multer');
var watermakRouter = _express["default"].Router();
exports.watermakRouter = watermakRouter;
var storage = multer.diskStorage({
  destination: function destination(req, file, cb) {
    cb(null, 'uploads/'); // Thư mục lưu trữ tệp đã tải lên
  },

  filename: function filename(req, file, cb) {
    cb(null, file.originalname); // Giữ nguyên tên của tệp
  }
});

var upload = multer({
  storage: storage
});
watermakRouter.route("/").post(upload.single("file"), _convertWebPtoJpg["default"], _water["default"].addWaterMark);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZXhwcmVzcyIsIl9pbnRlcm9wUmVxdWlyZURlZmF1bHQiLCJyZXF1aXJlIiwiX3dhdGVyIiwiX2NvbnZlcnRXZWJQdG9KcGciLCJtdWx0ZXIiLCJ3YXRlcm1ha1JvdXRlciIsImV4cHJlc3MiLCJSb3V0ZXIiLCJleHBvcnRzIiwic3RvcmFnZSIsImRpc2tTdG9yYWdlIiwiZGVzdGluYXRpb24iLCJyZXEiLCJmaWxlIiwiY2IiLCJmaWxlbmFtZSIsIm9yaWdpbmFsbmFtZSIsInVwbG9hZCIsInJvdXRlIiwicG9zdCIsInNpbmdsZSIsImNvbnZlcnRXZWJQVG9KcGVnIiwid2F0ZXJDb250cm9sbGVyIiwiYWRkV2F0ZXJNYXJrIl0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2FwaS9yZXNvdXJjZXMvd2F0ZXJtYXJrL3dhdGVybWFyay5yb3V0ZXIuanMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGV4cHJlc3MgZnJvbSBcImV4cHJlc3NcIlxyXG5pbXBvcnQgd2F0ZXJDb250cm9sbGVyIGZyb20gXCIuL3dhdGVyLmNvbnRyb2xsZXJcIjtcclxuaW1wb3J0IGNvbnZlcnRXZWJQVG9KcGVnIGZyb20gXCIuLi8uLi8uLi9taWRkbGV3YXJlL2NvbnZlcnRXZWJQdG9KcGdcIjtcclxuY29uc3QgbXVsdGVyID0gcmVxdWlyZSgnbXVsdGVyJyk7XHJcblxyXG5leHBvcnQgY29uc3Qgd2F0ZXJtYWtSb3V0ZXIgPSBleHByZXNzLlJvdXRlcigpO1xyXG5cclxuY29uc3Qgc3RvcmFnZSA9IG11bHRlci5kaXNrU3RvcmFnZSh7XHJcbiAgICBkZXN0aW5hdGlvbjogZnVuY3Rpb24gKHJlcSwgZmlsZSwgY2IpIHtcclxuICAgICAgICBjYihudWxsLCAndXBsb2Fkcy8nKSAvLyBUaMawIG3hu6VjIGzGsHUgdHLhu68gdOG7h3AgxJHDoyB04bqjaSBsw6puXHJcbiAgICB9LFxyXG4gICAgZmlsZW5hbWU6IGZ1bmN0aW9uIChyZXEsIGZpbGUsIGNiKSB7XHJcbiAgICAgICAgY2IobnVsbCwgZmlsZS5vcmlnaW5hbG5hbWUpIC8vIEdp4buvIG5ndXnDqm4gdMOqbiBj4bunYSB04buHcFxyXG4gICAgfVxyXG59KTtcclxuY29uc3QgdXBsb2FkID0gbXVsdGVyKHsgc3RvcmFnZTogc3RvcmFnZSB9KTtcclxuXHJcbndhdGVybWFrUm91dGVyLnJvdXRlKFwiL1wiKS5wb3N0KHVwbG9hZC5zaW5nbGUoXCJmaWxlXCIpLCBjb252ZXJ0V2ViUFRvSnBlZyAsIHdhdGVyQ29udHJvbGxlci5hZGRXYXRlck1hcmspIl0sIm1hcHBpbmdzIjoiOzs7Ozs7O0FBQUEsSUFBQUEsUUFBQSxHQUFBQyxzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsTUFBQSxHQUFBRixzQkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUUsaUJBQUEsR0FBQUgsc0JBQUEsQ0FBQUMsT0FBQTtBQUNBLElBQU1HLE1BQU0sR0FBR0gsT0FBTyxDQUFDLFFBQVEsQ0FBQztBQUV6QixJQUFNSSxjQUFjLEdBQUdDLG1CQUFPLENBQUNDLE1BQU0sQ0FBQyxDQUFDO0FBQUNDLE9BQUEsQ0FBQUgsY0FBQSxHQUFBQSxjQUFBO0FBRS9DLElBQU1JLE9BQU8sR0FBR0wsTUFBTSxDQUFDTSxXQUFXLENBQUM7RUFDL0JDLFdBQVcsRUFBRSxTQUFBQSxZQUFVQyxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFO0lBQ2xDQSxFQUFFLENBQUMsSUFBSSxFQUFFLFVBQVUsQ0FBQyxFQUFDO0VBQ3pCLENBQUM7O0VBQ0RDLFFBQVEsRUFBRSxTQUFBQSxTQUFVSCxHQUFHLEVBQUVDLElBQUksRUFBRUMsRUFBRSxFQUFFO0lBQy9CQSxFQUFFLENBQUMsSUFBSSxFQUFFRCxJQUFJLENBQUNHLFlBQVksQ0FBQyxFQUFDO0VBQ2hDO0FBQ0osQ0FBQyxDQUFDOztBQUNGLElBQU1DLE1BQU0sR0FBR2IsTUFBTSxDQUFDO0VBQUVLLE9BQU8sRUFBRUE7QUFBUSxDQUFDLENBQUM7QUFFM0NKLGNBQWMsQ0FBQ2EsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDQyxJQUFJLENBQUNGLE1BQU0sQ0FBQ0csTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFQyw0QkFBaUIsRUFBR0MsaUJBQWUsQ0FBQ0MsWUFBWSxDQUFDIn0=